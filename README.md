# 3 курс
# Суфьянова Диана Руслановна
# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура
В проекте используется архитектурный паттерн MVP.
MVP-паттерн делит код на три слоя:
1. Слой данных (Model) — данные, в которых отражена вся ценность приложения. Этот слой содержит значительную часть бизнес-логики. При изменении данные должны попадать в отображение.
2. Слой отображения (View) — интерфейс для взаимодействия с пользователем. Его задача — выводить что-то на экран и генерировать события с действиями пользователя. Никаких решений тут не принимается.
3. Слой представления (Presenter) - В Presenter передаются экземпляры отображения и модели, которые нужно связать.


## Базовые классы

### EventEmitter
Класс EventEmitter обеспечивает работу событий. Его функции: установить обработчик на событие, снять обработчик с события, инициировать событие с данными, слушать все события, сбросить все обработчики, сделать коллбек триггер, генерирующий событие при вызове.

### Api
Класс Api предназначен для работы с HTTP-запросами. Его функции: осуществление запросов к серверу на получение данных, отправку данных.

### View
Абстрактный базовый класс View для создания компонентов.

### Model
Абстрактный базовый класс Model для создания моделей.


## Компоненты модели данных

### CatalogModel
Класс используется для управления коллекцией продуктов. Его функции: подгрузка всех товаров, получение товара то его id.

### BasketModel
Класс используется для управления товарами внутри корзины. Его функции: добавление товара, удаление товара из корзины, подсчитывание суммы заказа, хранение всех товаров в корзине, очищение после успешной покупки.

### OrderModel
Класс используется для управления состоянием заказа. Его функции: валидация форма оплаты, валидация формы контактов, отправка заказа, очищение после успешной покупки.


## Компоненты отображения

### PageView
Класс PageView предназначен для отображения страницы.

### ProductView
Класс ProductView предназначен для отображения продукта в каталоге.

### ModalView
Rласс ModalView предназначен для отображения модального окна. Обработка событий кликов для закрытия, открытия окна. 

### ModalProductView
Класс ModalProductView предназначен для отображения продукта в модальном окне.

### ModalBasketView
Класс ModalBasketView предназначен для отображения корзины в модальном окне.

### ProductBasketView
Класс ProductBasketView предназначен для отображения продукта в корзине.

### ModalPaymentView
Класс ModalPaymentView предназначен для отображения формы оплаты в модальном окне.

### ModalContactsView
Класс ModalContactsView предназначен для отображения формы контактов в модальном окне.

### ModalSuccessView
Класс ModalSuccessView предназначен для отображения информации о успешной покупке в модальном окне.


## Типы данных

### IProduct - интерфейс продукта
```ts
interface IProduct {
  id: string;
  description: string;
  image: string;
  title: string;
  category: string;
  price: number;
}
```

### IProductList - интерфейс списка продуктов
```ts
interface IProductList {
  total: number;
  items: IProduct[];
}
```

### BasketProductItem - тип продукта с индификатором, названием и ценой
```ts
type BasketProductItem = Pick<IProduct, 'id' | 'title' | 'price'>;
```

### IBasket - интерфейс корзины
```ts
interface IBasket {
  items: HTMLElement[];
  totalPrice: number;
}
```

### IOrder - интерфейс заказа
```ts
interface IOrder {
  payment: string,
  email: string,
  address: string,
  phone: string,
  total: number,
  items: string[]
}
```

### IOrder - интерфейс ответа с сервера о заказе
```ts
interface IOrderResult {
  id: string;
  total: number;
}
```

### IValidationResult - интерфейс валидации
```ts
interface IValidationResult {
  isValid: boolean;
  errorMessage: string;
}
```

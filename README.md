# 3 курс
# Крупина Полина Андреевна
# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта
Архитектура приложения базируется на паттерне MVP:

Model: Управляет бизнес-логикой и состоянием данных, такими как товары, корзина и заказы.
View: Отвечает за отображение данных и взаимодействие с пользователем.
Presenter: Обрабатывает логику взаимодействия между Model и View, контролируя действия пользователя и обновления данных.

## Описание базовых классов и компонентов
Model
- ProductModel: Обеспечивает получение данных о товарах из API и их предоставление для отображения.
- CartModel: Управляет данными корзины (добавление, удаление и получение товаров).
- OrderModel: Управляет процессом оформления заказа, включая данные о способе оплаты и контактных данных.
- UserModel: Хранит информацию о текущем пользователе, включая контактные данные и адрес доставки.

View
- ProductListView: Отображает список товаров.
- ProductDetailView: Показывает детальную информацию о выбранном товаре.
- CartView: Отображает содержимое корзины и позволяет управлять товарами в корзине.
- OrderFormView: Показывает форму оформления заказа и валидацию данных.

Presenter
- ProductPresenter: Загружает данные о товарах и управляет отображением деталей товара.
- CartPresenter: Отвечает за добавление и удаление товаров из корзины, а также обновление её состояния.
- OrderPresenter: Управляет процессом оформления заказа, валидацией данных и взаимодействием с сервером.

EventEmitter
Компонент EventEmitter реализует интерфейс IEvents, позволяя управлять событиями через стандартные методы on, off, emit и trigger. Он обеспечивает взаимодействие между компонентами, поддерживая подписку на события.

## Описание типов данных
Основные типы данных описаны в файле src/types/index.ts:

- Product: Представляет товар, включает такие поля, как id, name, description, price, imageUrl и isAvailable. Используется для хранения и отображения информации о каждом товаре.
- CartItem: Объект корзины, содержащий productId и quantity, которые позволяют отслеживать количество каждого товара в корзине.
- Order: Содержит данные для оформления заказа, такие как id, paymentMethod, deliveryAddress, customerEmail, customerPhone, а также массив товаров (items) типа CartItem.
- PaymentMethod: Представлен в виде строкового типа с возможными значениями: 'creditCard', 'paypal', 'bankTransfer'.
- ApiResponse<T>: Обёртка для ответов API, содержит флаг success, данные data и сообщение message, которое может быть указано в случае ошибки.
- ApiListResponse<T>: Обёртка для списка ответов API, включающая общее количество total и массив объектов items, используется для передачи данных в ProductModel.
- AppState: Описывает текущее состояние приложения и включает поля products, cart, order, isLoading и error.
- User: Представляет пользователя и включает поля id, name, email, phone и addresses.

## Взаимодействие компонентов
1. Пользователь выбирает товар на странице каталога.
2. ProductPresenter загружает информацию о товаре с помощью ProductModel и отображает её через ProductDetailView.
3. При добавлении товара в корзину CartPresenter вызывает CartModel для обновления корзины и обновляет CartView.
4. OrderPresenter управляет процессом оформления заказа, включая валидацию данных и отправку заказа с помощью OrderModel.
5. После успешной оплаты заказ и корзина очищаются, а пользователь получает уведомление.